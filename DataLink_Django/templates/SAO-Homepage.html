{% extends 'SAO-base.html' %}
{% load static %}

{% block content %} 

<div class="messages">
    {% if messages %}
        {% for message in messages %}
            <div class="successAnderrorMessagesPoppedup {% if message.tags %}{{ message.tags }}{% endif %}">
                <div class="successAnderrorMessagesPoppedup-icon">
                    {% if message.tags == 'success' %}
                        <i class="fas fa-check-circle"></i>
                    {% elif message.tags == 'error' %}
                        <i class="fas fa-exclamation-circle"></i>
                    {% elif message.tags == 'warning' %}
                        <i class="fas fa-exclamation-triangle"></i>
                    {% endif %}
                </div>
                <div class="successAnderrorMessagesPoppedup-content">
                    {{ message }}
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>


{% if removal_requests and removal_requests|length > 0 %}
<div class="removal-requests-container">
    <h3 class="title">Removal Requests</h3>
    <div class="table-container">
        <table class="requests-table">
            <thead>
                <tr>
                    <th>Requested By</th>
                    <th>Account to be removed</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for request in removal_requests %}
                    {% if request.status == "pending" %}
                        {% with request.user_votes as user_votes %}
                            {% if user_votes is not defined or email not in user_votes %}
                                <tr>
                                    <td>
                                        <div class="user-info">
                                            <div class="user-avatar">{{ request.requested_by|first }}</div>
                                            <span>{{ request.requested_by }}</span>
                                        </div>
                                    </td>
                                    <td>{{ request.email }}</td>
                                    <td>
                                        <span class="status-badge status-{{ request.status|lower }}">
                                            {{ request.status }}
                                        </span>
                                    </td>
                                    <td class="actions-cell">
                                        {% if user_votes is defined and email in user_votes %}
                                            <span class="voted-message">You have already voted.</span>
                                        {% else %}
                                            <!-- Approve Button Form -->
                                            <form method="POST" class="action-form" style="display:inline;" action="{% url 'saohomepage' %}">
                                                {% csrf_token %}
                                                <input type="hidden" name="action" value="approve">
                                                <input type="hidden" name="remove_superadmin" value="1">
                                                <input type="hidden" name="removal_email" value="{{ request.email }}"> 
                                                <button type="submit" class="action-button approve" aria-label="Approve request">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <polyline points="20 6 9 17 4 12"></polyline>
                                                    </svg>
                                                    <span>Approve</span>
                                                </button>
                                            </form>

                                            <!-- Disapprove Button Form -->
                                            <form method="POST" class="action-form" style="display:inline;" action="{% url 'saohomepage' %}">
                                                {% csrf_token %}
                                                <input type="hidden" name="action" value="disapprove">
                                                <input type="hidden" name="remove_superadmin" value="1">
                                                <input type="hidden" name="removal_email" value="{{ request.email }}"> 
                                                <button type="submit" class="action-button disapprove" aria-label="Disapprove request">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                                    </svg>
                                                    <span>Disapprove</span>
                                                </button>
                                            </form>
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endif %}
                        {% endwith %}
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}








<div class="dashboard-container">
    <h1 class="dashboard-title">DASHBOARD</h1>
     
    <div class="dashboard-grid">
        <a href="{% url 'view_students' %}" class="dashboard-card">
            <div class="card-icon">
                <i class="fas fa-user-graduate"></i>
            </div>
            <h2>View Approved Students</h2>
        </a>
        
        <a href="{% url 'view_owners' %}" class="dashboard-card">
            <div class="card-icon">
                <i class="fas fa-users-cog"></i>
            </div>
            <h2>View Approved Owners</h2>
        </a>
    
        <a href="{% url 'pendingreq' %}" class="dashboard-card">
            <div class="card-icon">
                <i class="fas fa-bell"></i>
            </div>
            <h2>Pending</h2>
            {% if total_pending_accounts > 0 %}
                <span class="notification-badge">{{ total_pending_accounts }}</span>
            {% endif %}
        </a>
    
        <div class="dashboard-card large">
            <div class="card-icon">
                <i class="fas fa-user-check"></i>
            </div>
            <h2>Approved Students</h2>
            <div class="stat-container">
                <p class="large-number" id="approvedStudents">{{ approved_student_count }}</p>
                <div class="stat-trend">
                    <i class="fas fa-arrow-up"></i>
                    <span>5%</span>
                </div>
            </div>
        </div>

        <div class="dashboard-card large">
            <div class="card-icon">
                <i class="fas fa-house-user"></i>
            </div>
            <h2>Approved Owners</h2>
            <div class="stat-container">
                <p class="large-number" id="approvedOwners">{{ approved_owner_count }}</p>
                <div class="stat-trend">
                    <i class="fas fa-arrow-up"></i>
                    <span>2%</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="clock-container">
        <i class="far fa-clock"></i>
        <div id="clock"></div>
    </div>
</div>

<div class="sticky-menu">
    <button id="menuButton" class="menu-button">
        <i class="fas fa-bars"></i>
    </button>
    <div class="menu-items">
        <button class="menu-item" data-tooltip="Add" id="addButton">
            <i class="fas fa-plus"></i>
        </button>
        <div class="submenu">
            <button class="submenu-item" data-tooltip="Add Student">
                <i class="fas fa-user-plus"></i>
            </button>
            <button class="submenu-item" data-tooltip="Add Superadmin">
                <i class="fas fa-user-shield"></i>
            </button>
        </div>
        <a href="{% url 'sao_message' %}"><button class="menu-item" data-tooltip="Message">  
            <i class="fas fa-comment"></i>
        </button>
    </a>
         
    </div>
</div>
 
<!-- Add Student Popup -->
<div id="addStudentPopup" class="popup">
    <div class="popup-content">
        <h2>Add Student</h2>
        <p>Enter 5-digit pincode to proceed:</p>
        <form id="addStudentForm" method="post" action="{% url 'saohomepage' %}">
            {% csrf_token %}
            <div class="pincode-container">
                <input autocomplete="off" type="text" name="student_pincode" id="studentPincode" class="pincode-input" maxlength="5" pattern="\d{5}" inputmode="numeric" required>
            </div>
            <button type="submit" class="submit-pin">Submit</button>
        </form>
        <button class="close-popup"><i class="fas fa-times"></i></button>
    </div>
</div>

<!-- Add Superadmin Popup -->
<div id="addSuperadminPopup" class="popup">
    <div class="popup-content">
        <h2>Add Superadmin</h2>
        <p>Enter 5-digit pincode to proceed:</p>
        <form id="addSuperadminForm" method="post" action="{% url 'saohomepage' %}">
            {% csrf_token %}
            <div class="pincode-container">
                <input autocomplete="off" type="text" name="superadmin_pincode" id="superadminPincode" class="pincode-input" maxlength="5" pattern="\d{5}" inputmode="numeric" required>
            </div>
            <button type="submit" class="submit-pin">Submit</button>
        </form>
        <button class="close-popup"><i class="fas fa-times"></i></button>
    </div>
</div>



{% if daysLogin == 1 %}
<!-- Background Overlay -->
<div class="firstlogin-overlay"></div>

<div id="firstLoginEverModal" class="firstlogin-modal">
    <div class="firstlogin-modal-content">
        <!-- Timer -->
        <div class="animation-timer">
            <svg class="timer-circle">
                <circle r="24" cx="26" cy="26"/>
            </svg>
            <span class="timer-text">3</span>
        </div>

        <!-- Decorative elements -->
        <div class="firstlogin-decoration">
            <div class="firstlogin-blob"></div>
            <div class="firstlogin-dots"></div>
        </div>
        
        <!-- Progress bar -->
        <div class="firstlogin-progress">
            <div class="firstlogin-progress-track">
                <div class="firstlogin-progress-fill"></div>
            </div>
            <div class="firstlogin-steps-count">Step <span class="current">1</span> of 3</div>
        </div>

        <div class="firstlogin-steps-container">
            <!-- Step 1 -->
            <div class="firstlogin-step active" data-step="1">
                <div class="firstlogin-icon-container">
                    <div class="firstlogin-welcome-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div class="firstlogin-icon-ring"></div>
                    <div class="firstlogin-icon-particles"></div>
                </div>
                <h2>Welcome, {{ name }}! Let us guide you through our system to help you get familiar.</h2>
                <p>Explore the powerful platform developed by CTU-AC! As the superadmin, you have full control to approve, reject, disable, or ban students and owners, with the ability to undo any actions. Please exercise caution, as you hold full responsibility for all decisions.</p>
            </div>

            <!-- Step 2 -->
            <div class="firstlogin-step" data-step="2">
                <div class="firstlogin-icon-container">
                    <div class="firstlogin-welcome-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10.5V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-5.5M8 8h8m-8 4h5" />
                        </svg>
                        
                    </div>
                    <div class="firstlogin-icon-ring"></div>
                    <div class="firstlogin-icon-particles"></div>
                </div>
                <h2>Chat/Messages</h2>
                <p>Connect with the owners and students with chats. Also this system uses end-to-end encryption for security purposes.</p>
            </div>

            <!-- Step 3 -->
            <div class="firstlogin-step" data-step="3">
                <div class="firstlogin-icon-container">
                    <div class="firstlogin-welcome-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div class="firstlogin-icon-ring"></div>
                    <div class="firstlogin-icon-particles"></div>
                </div>
                <h2>You're Ready to Go Next! Let's GO!</h2> 
            </div>
        </div>

        <button id="firstlogin-next-btn" class="hidden">Continue</button>
    </div>
</div>

<style>
/* Background Overlay */
.firstlogin-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    z-index: 9998;
    opacity: 0;
    animation: fadeIn 0.5s ease forwards;
}

.firstlogin-modal {
    display: block;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 550px;
    min-height: 450px;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 255, 0.95));
    padding: 40px;
    border-radius: 24px;
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.1),
        0 0 0 1px rgba(0, 0, 0, 0.05),
        inset 0 0 80px rgba(255, 255, 255, 0.5);
    z-index: 9999;
    overflow: hidden;
    opacity: 0;
    animation: modalPopIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}

/* Timer Styles */
.animation-timer {
    position: absolute;
    bottom: 2px;
    right: 20px;
    width: 52px;
    height: 52px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.timer-circle {
    width: 52px;
    height: 52px;
    transform: rotate(-90deg);
}

.timer-circle circle {
    fill: none;
    stroke: #0066ff;
    stroke-width: 3;
    stroke-dasharray: 151;
    stroke-dashoffset: 151;
    animation: timerAnimation 3s linear forwards;
}

.timer-text {
    position: absolute;
    font-size: 16px;
    font-weight: 600;
    color: #0066ff;
}

.firstlogin-modal-content {
    position: relative;
    z-index: 2;
}

/* Decorative Elements */
.firstlogin-decoration {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;
}

.firstlogin-blob {
    position: absolute;
    top: -50%;
    right: -50%;
    width: 300px;
    height: 300px;
    background: linear-gradient(135deg, rgba(0, 102, 255, 0.1), rgba(0, 102, 255, 0.05));
    border-radius: 50%;
    filter: blur(40px);
    animation: blobFloat 8s infinite ease-in-out;
}

.firstlogin-dots {
    position: absolute;
    width: 100%;
    height: 100%;
    background-image: radial-gradient(rgba(0, 102, 255, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
    opacity: 0.5;
}

/* Progress Bar */
.firstlogin-progress {
    margin-bottom: 40px;
}

.firstlogin-progress-track {
    width: 100%;
    height: 6px;
    background: rgba(0, 102, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 10px;
}

.firstlogin-progress-fill {
    width: 33.33%;
    height: 100%;
    background: #0066ff;
    border-radius: 3px;
    transition: width 0.5s ease;
}

.firstlogin-steps-count {
    text-align: right;
    font-size: 14px;
    color: #666;
}

/* Icon Styles */
.firstlogin-icon-container {
    position: relative;
    width: 100px;
    height: 100px;
    margin: 0 auto 30px;
}

.firstlogin-welcome-icon {
    position: relative;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #0066ff, #0052cc);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
}

.firstlogin-welcome-icon svg {
    width: 50px;
    height: 50px;
    color: white;
    animation: iconPop 0.5s ease;
}

.firstlogin-icon-ring {
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border: 2px solid #0066ff;
    border-radius: 50%;
    animation: ringPulse 2s infinite;
}

.firstlogin-icon-particles::before,
.firstlogin-icon-particles::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    background: #0066ff;
    border-radius: 50%;
    animation: particleFloat 3s infinite;
}

/* Content Styles */
.firstlogin-step {
    display: none;
    opacity: 0;
    transform: translateY(20px) scale(0.95);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    text-align: center;
    padding: 20px 0;
}

.firstlogin-step.active {
    display: block;
    opacity: 1;
    transform: translateY(0) scale(1);
}

.firstlogin-modal h2 {
    color: #1a1a1a;
    font-size: clamp(24px, 5vw, 32px);
    margin: 0 0 16px;
    font-weight: 700;
    line-height: 1.2;
}

.firstlogin-modal p {
    color: #666;
    font-size: clamp(16px, 3vw, 18px);
    line-height: 1.6;
    margin: 0 0 30px;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}

/* Button Styles */
#firstlogin-next-btn {
    background: linear-gradient(135deg, #0066ff, #0052cc);
    color: white;
    border: none;
    padding: 16px 32px;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 102, 255, 0.3);
    opacity: 0;
    transform: translateY(10px);
    animation: buttonFloat 3s ease-in-out infinite;
    position: relative;
    overflow: hidden;
}

#firstlogin-next-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0));
    transform: translateX(-100%);
    transition: transform 0.5s ease;
}

#firstlogin-next-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 102, 255, 0.4);
}

#firstlogin-next-btn:hover::before {
    transform: translateX(100%);
}

#firstlogin-next-btn.show {
    opacity: 1;
    transform: translateY(0);
}

.hidden {
    display: none;
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes modalPopIn {
    0% {
        opacity: 0;
        transform: translate(-50%, -40%) scale(0.95);
    }
    100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
}

@keyframes timerAnimation {
    from { stroke-dashoffset: 151; }
    to { stroke-dashoffset: 0; }
}

@keyframes buttonFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

@keyframes blobFloat {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    50% { transform: translate(-30px, 20px) rotate(180deg); }
}

@keyframes ringPulse {
    0% { transform: scale(1); opacity: 0.5; }
    50% { transform: scale(1.2); opacity: 0; }
    100% { transform: scale(1); opacity: 0.5; }
}

@keyframes particleFloat {
    0%, 100% { transform: translate(0, 0); }
    50% { transform: translate(10px, -10px); }
}

@keyframes iconPop {
    0% { transform: scale(0.5); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

/* Responsive Design */
@media (max-width: 768px) {
    .firstlogin-modal {
        padding: 30px;
        min-height: 400px;
    }
    
    .firstlogin-icon-container {
        width: 80px;
        height: 80px;
    }
    
    .firstlogin-welcome-icon svg {
        width: 40px;
        height: 40px;
    }
}
@media (max-width: 480px) {
    .firstlogin-modal {
        padding: 20px;
        min-height: 350px;
    }
    
    .animation-timer {
        top: 25px;
        left: 7px;
        width: 40px;
        height: 40px; 
    }
    
    .timer-circle {
        width: 40px;
        height: 40px;
    }
    
    .timer-circle circle {
        r: 18;
        cx: 20;
        cy: 20;
        stroke-dasharray: 113;
        stroke-dashoffset: 113;
    }
    
    .timer-text {
        font-size: 14px;
    }
    
    .firstlogin-progress {
        margin-bottom: 30px;
    }
    
    .firstlogin-modal h2 {
        font-size: 22px;
        margin-bottom: 12px;
    }
    
    .firstlogin-modal p {
        font-size: 15px;
        margin-bottom: 20px;
    }
    
    #firstlogin-next-btn {
        padding: 14px 28px;
        font-size: 15px;
    }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const modal = document.getElementById("firstLoginEverModal");
    const nextBtn = document.getElementById("firstlogin-next-btn");
    const steps = document.querySelectorAll(".firstlogin-step");
    const progressFill = document.querySelector(".firstlogin-progress-fill");
    const currentStepText = document.querySelector(".firstlogin-steps-count .current");
    const timerText = document.querySelector(".timer-text");
    let currentStep = 1;
    let timeLeft = 3;

    // Timer countdown
    const timer = setInterval(() => {
        timeLeft--;
        timerText.textContent = timeLeft;
        
        if (timeLeft <= 0) {
            clearInterval(timer);
            nextBtn.classList.remove("hidden");
            nextBtn.classList.add("show");
        }
    }, 1000); 

    function updateStep(step) {
        // Reset timer for each step
        timeLeft = 3;
        timerText.textContent = timeLeft;
        
        // Restart timer animation
        const timerCircle = document.querySelector(".timer-circle circle");
        timerCircle.style.animation = 'none';
        timerCircle.offsetHeight;
        timerCircle.style.animation = 'timerAnimation 5s linear forwards';

        // Previous step update logic
        steps.forEach(s => {
            s.classList.remove("active");
            if (s.dataset.step == step) {
                s.classList.add("active");
            }
        });

        progressFill.style.width = `${(step/3) * 100}%`;
        currentStepText.textContent = step;

        if (step === 3) {
            nextBtn.textContent = "Take me next";

            // Add an event listener for the button click
            nextBtn.addEventListener("click", function handleNextClick() {
                // Redirect to the new page
                window.location.href = "{% url 'demoAddStudent' %}";

                // Remove the event listener to avoid multiple redirects
                nextBtn.removeEventListener("click", handleNextClick);
            });
        } else {
            nextBtn.textContent = "Continue";
        }


        const currentIcon = document.querySelector(`.firstlogin-step[data-step="${step}"] .firstlogin-welcome-icon svg`);
        currentIcon.style.animation = 'none';
        currentIcon.offsetHeight;
        currentIcon.style.animation = 'iconPop 0.5s ease';
        
        // Hide button until timer completes
        nextBtn.classList.add("hidden");
        nextBtn.classList.remove("show");
        
        // Start new timer
        timeLeft = 3;
        const newTimer = setInterval(() => {
            timeLeft--;
            timerText.textContent = timeLeft;
            
            if (timeLeft <= 0) {
                clearInterval(newTimer);
                nextBtn.classList.remove("hidden");
                nextBtn.classList.add("show");
            }
        }, 1000);
    }

    nextBtn.addEventListener("click", function() {
        if (currentStep < 3) {
            currentStep++;
            updateStep(currentStep);
        } else {
            // Fade out animation
            modal.style.animation = 'fadeOut 0.5s ease forwards';
            document.querySelector('.firstlogin-overlay').style.animation = 'fadeOut 0.5s ease forwards';
            
            setTimeout(() => {
                modal.style.display = "none";
                document.querySelector('.firstlogin-overlay').remove();
                document.body.classList.remove("firstlogin-modal-active");
            }, 500);
        }
    });

    // Initialize
    document.body.classList.add("firstlogin-modal-active");
}); 
</script>
{% endif %}
{% endblock %}

{% block extra_css %}
<style>
    .removal-requests-container {
    padding: 24px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);  
} 

.title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 1.5rem;
}

.table-container {
    overflow-x: auto;
}

.requests-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
}

.requests-table th {
    background-color: #f9fafb;
    padding: 12px 24px;
    text-align: left;
    font-weight: 600;
    color: #4b5563;
    border-bottom: 1px solid #e5e7eb;
    white-space: nowrap;
}

.requests-table td {
    padding: 16px 24px;
    color: #1f2937;
    border-bottom: 1px solid #e5e7eb;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.user-avatar {
    width: 32px;
    height: 32px;
    background-color: #6366f1;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 500;
    text-transform: uppercase;
}

.status-badge {
    padding: 6px 12px;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 500;
    display: inline-block;
}

.status-pending {
    background-color: #fef3c7;
    color: #92400e;
}

.status-approved {
    background-color: #dcfce7;
    color: #166534;
}

.status-disapproved {
    background-color: #fee2e2;
    color: #991b1b;
}

.actions-cell {
    display: flex;
    gap: 8px;
}

.action-form {
    display: inline;
}

.action-button {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    border-radius: 6px;
    border: 1px solid transparent;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.action-button.approve {
    background-color: #f0fdf4;
    color: #166534;
    border-color: #dcfce7;
}

.action-button.approve:hover {
    background-color: #dcfce7;
}

.action-button.disapprove {
    background-color: #fef2f2;
    color: #991b1b;
    border-color: #fee2e2;
}

.action-button.disapprove:hover {
    background-color: #fee2e2;
}

.action-button:focus {
    outline: 2px solid transparent;
    outline-offset: 2px;
    box-shadow: 0 0 0 2px #e5e7eb;
}

@media (max-width: 768px) {
    .removal-requests-container {
        padding: 16px;
    }
    
    .requests-table td, 
    .requests-table th {
        padding: 12px 16px;
    }
    
    .action-button span {
        display: none;
    }
    
    .action-button {
        padding: 8px;
    }
}

    :root {
    --primary-color: #006400;
    --secondary-color: #004d00;
    --background-color: #f0f0f0;
    --card-background: white;
    --text-color: #333;
    --shadow-color: rgba(0, 0, 0, 0.1);
}

body {
    font-family: 'Roboto', sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
}

.alert {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .fade-out {
            opacity: 0;
        }


.dashboard-container {
    padding: 1rem;
    max-width: 1200px;
    margin: 0px auto;
}

.dashboard-title {
    color: var(--primary-color);
    margin-bottom: 2rem;
    text-align: center;
    font-size: 2.5rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    position: relative;
    padding-bottom: 15px;
}

.dashboard-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background-color: var(--primary-color);
    border-radius: 2px;
}

.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
}

.dashboard-card {
    background-color: #efe;
    padding: 2rem;
    border-radius: 15px;
    box-shadow: 0 10px 20px var(--shadow-color);
    text-align: center;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
}

.dashboard-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.dashboard-card:hover::before {
    opacity: 1;
}

.dashboard-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px var(--shadow-color);
}

.card-icon {
    background-color: var(--primary-color);
    color: white;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 1.5rem;
    transition: all 0.3s ease;
}

.dashboard-card:hover .card-icon {
    transform: scale(1.1);
}

.card-icon i {
    font-size: 2rem;
}

.dashboard-card h2 {
    color: var(--primary-color);
    font-size: 1.4rem;
    margin-bottom: 0.5rem;
    position: relative;
    z-index: 1;
}

.dashboard-card.large {
    grid-column: span 3;
    display: flex;
    flex-direction: row;
    justify-content: space-around;
    align-items: center;
    padding: 2rem 4rem;
    overflow: hidden;
}

.dashboard-card.large .card-icon {
    margin-bottom: 0;
    margin-right: 2rem;
}

.dashboard-card.large h2 {
    font-size: 1.8rem;
    margin-bottom: 0;
    margin-right: 2rem;
}

.stat-container {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.large-number {
    font-size: 3.5rem;
    font-weight: bold;
    color: var(--primary-color);
    margin: 0;
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.stat-trend {
    display: flex;
    align-items: center;
    font-size: 1rem;
    color: #28a745;
    margin-top: 0.5rem;
}

.stat-trend i {
    margin-right: 0.3rem;
}

.dashboard-card:hover .large-number {
    transform: scale(1.1);
}

@keyframes countUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.notification-badge {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background-color: #ff4757;
    color: white;
    border-radius: 50%;
    padding: 0.5rem;
    font-size: 0.9rem;
    min-width: 25px;
    height: 25px;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 2px 5px rgba(255, 71, 87, 0.3);
}

.clock-container {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    margin-top: 2rem;
    font-size: 1.2rem;
    color: var(--primary-color); 
    padding: 1rem;
    border-radius: 10px;  
}

#clock {
    font-size: 1.8rem;
    margin-left: 0.5rem;
    font-weight: 600;
}

/* Sticky Menu Styles */
.sticky-menu {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
}

.menu-button {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    border: none;
    font-size: 1.8rem;
    cursor: pointer;
    box-shadow: 0 4px 10px var(--shadow-color);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.menu-button:hover {
    transform: scale(1.1) rotate(90deg);
    background-color: var(--secondary-color);
}

.menu-items {
    position: absolute;
    bottom: 80px;
    right: 0;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px);
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.menu-items.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.menu-item {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    border: none;
    font-size: 1.4rem;
    margin-bottom: 15px;
    cursor: pointer;
    box-shadow: 0 4px 8px var(--shadow-color);
    position: relative;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.submenu-item {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #111;
    color: white;
    border: none;
    font-size: 1.4rem;
    margin-bottom: 15px;
    cursor: pointer;
    box-shadow: 0 4px 8px var(--shadow-color);
    position: relative;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.menu-item:hover,
.submenu-item:hover {
    transform: scale(1.1);
    background-color: var(--secondary-color);
}

.menu-item::after,
.submenu-item::after {
    content: attr(data-tooltip);
    position: absolute;
    right: 70px;
    top: 50%;
    transform: translateY(-50%);
    background-color: #333;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.9rem;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.menu-item:hover::after,
.submenu-item:hover::after {
    opacity: 1;
    visibility: visible;
    right: 75px;
}

.submenu {
    position: absolute;
    right: 70px;
    bottom: 0;
    display: flex;
    opacity: 0;
    visibility: hidden;
    transform: translateX(20px);
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.submenu.show {
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
}

.submenu-item {
    margin-right: 15px;
}

/* Popup Styles */
.popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1001;
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.popup-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 3rem;
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    text-align: center;
    max-width: 450px;
    width: 90%;
    animation: scaleIn 0.3s ease-out;
}

@keyframes scaleIn {
    from { transform: translate(-50%, -50%) scale(0.9); }
    to { transform: translate(-50%, -50%) scale(1); }
}

.popup-content h2 {
    color: var(--primary-color);
    margin-bottom: 1.5rem;
    font-size: 2rem;
}

.popup-content p {
    color: #555;
    margin-bottom: 2rem;
    font-size: 1.1rem;
}

.pincode-container {
        display: flex;
        justify-content: center;
        margin: 2rem 0;
        position: relative;
    }

    .pincode-input {
        width: 290px;
        height: 60px;
        text-align: center;
        font-size: 1.8rem;
        border: none;
        background-color: transparent;
        letter-spacing: 50px;
        padding-left: 25px;
        margin-right: -25px;
        opacity: 0;
        position: absolute;
        top: 0;
        left: 0;
    }

    .pincode-input:focus {
        outline: none;
    }

    .pincode-boxes {
        display: flex;
        justify-content: space-between;
        width: 290px;
    }

    .pincode-box {
        width: 50px;
        height: 60px;
        border: 2px solid var(--primary-color);
        border-radius: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.8rem;
        color: var(--primary-color);
    }


.submit-pin {
    display: inline-block;
    padding: 1rem 2rem;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 30px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 100, 0, 0.1);
}

.submit-pin:hover {
    background-color: var(--secondary-color);
    transform: translateY(-2px);
    box-shadow: 0 6px 8px rgba(0, 100, 0, 0.2);
}

.submit-pin:active {
    transform: translateY(0);
}

.close-popup {
    position: absolute;
    top: 20px;
    right: 25px;
    font-size: 1.8rem;
    color: #888;
    background: none;
    border: none;
    cursor: pointer;
    transition: color 0.3s ease;
}

.close-popup:hover {
    color: #333;
}

.dashboard-card {
    text-decoration: none;  /* Remove underline from links */
    color: inherit;        /* Inherit color from parent */
}

/* Responsive styles */
@media (max-width: 768px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
    }
    .dashboard-card.large {
        grid-column: auto;
        flex-direction: column;
        padding: 2rem;
    }
    .dashboard-card.large .card-icon {
        margin-right: 0;
        margin-bottom: 1.5rem;
    }
    .dashboard-card.large h2 {
        margin-right: 0;
        margin-bottom: 1rem;
    }
    .clock-container {
        justify-content: center;
    }
    .sticky-menu {
        bottom: 20px;
        right: 20px;
    }
    .menu-button {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }
    .menu-items {
        bottom: 70px;
    }
    .menu-item, .submenu-item {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
    }
    .menu-item::after, .submenu-item::after {
        right: 60px;
        font-size: 0.8rem;
    }
    .menu-item:hover::after, .submenu-item:hover::after {
        right: 65px;
    }
    .submenu {
        right: 60px;
    }
    .dashboard-container {
        padding: 1.5rem;
    }
    .dashboard-title {
        font-size: 2.2rem;
    }
}

@media (max-width: 480px) {
    .popup-content {
        padding: 2rem;
    }

    .pincode-input {
        width: 240px; /* Adjust for smaller screens */
        height: 55px;
        font-size: 1.6rem;
        letter-spacing: 40px; /* Smaller spacing for smaller screens */
        padding-left: 20px;
        margin-right: -20px;
    }

    .pincode-box {
        width: 45px;
        height: 55px;
    }

    .submit-pin {
        padding: 0.8rem 1.6rem;
        font-size: 1rem;
    }
}
/* Container for messages */
.successAnderrorMessagesPoppedup {
    position: fixed;
    top: 20px;
    right: 20px;
    max-width: 350px;
    padding: 16px 20px;
    border-radius: 12px;
    background: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 99999;
    opacity: 0;
    transform: translateX(100px);
    animation: successAnderrorMessagesPoppedup-slideIn 0.3s ease forwards;
}

.successAnderrorMessagesPoppedup.success {
    border-left: 4px solid #10B981;
}

.successAnderrorMessagesPoppedup.error {
    border-left: 4px solid #EF4444;
}

.successAnderrorMessagesPoppedup.warning {
    border-left: 4px solid #dcad11;
}

.successAnderrorMessagesPoppedup.slideOut {
    animation: successAnderrorMessagesPoppedup-slideOut 0.3s ease forwards;
}

.successAnderrorMessagesPoppedup-icon {
    font-size: 20px;
    flex-shrink: 0;
}

.success .successAnderrorMessagesPoppedup-icon {
    color: #10B981;
}

.error .successAnderrorMessagesPoppedup-icon {
    color: #EF4444;
}

.warning .successAnderrorMessagesPoppedup-icon {
    color: #dcad11;
}

.successAnderrorMessagesPoppedup-content {
    color: #374151;
    font-size: 14px;
    font-weight: 500;
    line-height: 1.4;
}

@keyframes successAnderrorMessagesPoppedup-slideIn {
    from {
        opacity: 0;
        transform: translateX(100px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes successAnderrorMessagesPoppedup-slideOut {
    from {
        opacity: 1;
        transform: translateX(0);
    }
    to {
        opacity: 0;
        transform: translateX(100px);
    }
}


</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const messageList = document.querySelector('.message-list');


        if (messageList) {
            setTimeout(() => {
                messageList.style.transition = "opacity 0.5s ease"; // Transition effect
                messageList.style.opacity = 0; // Fade out effect
                setTimeout(() => {
                    messageList.remove(); // Remove from DOM after fading out
                }, 500); // Match this duration with the transition time
            }, 2000); // 2 seconds before starting to fade out
        }
    
        const alerts = document.querySelectorAll('.alert');
        setTimeout(function() {
            alerts.forEach(function(alert) {
                alert.classList.add('fade-out');  // Add fade-out class to trigger CSS transition
            });
        }, 1500);  // 1.5 seconds delay
    
        // Remove the message from the DOM after the fade-out effect completes (about 0.5 seconds later)
        setTimeout(function() {
            alerts.forEach(function(alert) {
                alert.style.display = 'none';  // Hide after fade-out
            });
        }, 1700);  // 1.7 seconds total
    
        // Clock functionality
        function updateClock() {
            const now = new Date();
            const clock = document.getElementById('clock');
            clock.textContent = now.toLocaleTimeString();
        }
        
        setInterval(updateClock, 1000);
        updateClock(); // Initial call
    
        // Sticky menu functionality
        const menuButton = document.getElementById('menuButton');
        const menuItems = document.querySelector('.menu-items');
        const addButton = document.getElementById('addButton');
        const submenu = document.querySelector('.submenu');
    
        menuButton.addEventListener('click', function() {
            menuItems.classList.toggle('show');
            if (!menuItems.classList.contains('show')) {
                submenu.classList.remove('show');
            }
        });
    
        addButton.addEventListener('click', function(event) {
            event.stopPropagation();
            submenu.classList.toggle('show');
        });
    
        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.sticky-menu')) {
                menuItems.classList.remove('show');
                submenu.classList.remove('show');
            }
        });
    
        // Animate menu items
        const menuItemsArray = Array.from(menuItems.children);
        menuItemsArray.forEach((item, index) => {
            item.style.transitionDelay = `${index * 0.1}s`;
        });
    
        // Popup functionality
        const addStudentButton = document.querySelector('[data-tooltip="Add Student"]');
        const addSuperadminButton = document.querySelector('[data-tooltip="Add Superadmin"]');
        const addStudentPopup = document.getElementById('addStudentPopup');
        const addSuperadminPopup = document.getElementById('addSuperadminPopup');
        const closeButtons = document.querySelectorAll('.close-popup');
        const pincodeInputs = document.querySelectorAll('.pincode-input');
        
        function openPopup(popup) {
            popup.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent scrolling when popup is open
            popup.querySelector('.pincode-input').focus(); // Focus on the input
        }
    
        function closePopup(popup) {
            popup.style.display = 'none';
            document.body.style.overflow = ''; // Restore scrolling
            clearPincodeInput(popup);
        }
    
        function clearPincodeInput(popup) {
            popup.querySelector('.pincode-input').value = '';
            popup.querySelectorAll('.pincode-box').forEach(box => {
                box.style.backgroundColor = 'transparent';
                box.style.borderColor = 'var(--primary-color)';
            });
        }
    
        addStudentButton.addEventListener('click', () => openPopup(addStudentPopup));
        addSuperadminButton.addEventListener('click', () => openPopup(addSuperadminPopup));
    
        closeButtons.forEach(button => {
            button.addEventListener('click', () => closePopup(button.closest('.popup')));
        });
    
        pincodeInputs.forEach(input => {
            // Create boxes
            const boxesContainer = document.createElement('div');
            boxesContainer.className = 'pincode-boxes';
            for (let i = 0; i < 5; i++) {
                const box = document.createElement('div');
                box.className = 'pincode-box';
                boxesContainer.appendChild(box);
            }
            input.parentNode.appendChild(boxesContainer);
    
            input.addEventListener('input', function(e) {
                // Keep only digits and limit to 5
                this.value = this.value.replace(/\D/g, '').slice(0, 5);
                
                // Update box styles and content based on input
                const boxes = this.parentNode.querySelectorAll('.pincode-box');
                boxes.forEach((box, index) => {
                    if (index < this.value.length) {
                        box.style.backgroundColor = 'var(--primary-color)';
                        box.style.borderColor = 'var(--primary-color)';
                        box.style.color = 'white';
                        box.textContent = this.value[index];
                    } else {
                        box.style.backgroundColor = 'transparent';
                        box.style.borderColor = 'var(--primary-color)';
                        box.style.color = 'var(--primary-color)';
                        box.textContent = '';
                    }
                });
            });
    
            // Handle backspace and delete
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' || e.key === 'Delete') {
                    const boxes = this.parentNode.querySelectorAll('.pincode-box');
                    boxes[this.value.length - 1].textContent = '';
                    boxes[this.value.length - 1].style.backgroundColor = 'transparent';
                    boxes[this.value.length - 1].style.color = 'var(--primary-color)';
                }
            });
        });
    
        // Form submission
        const addStudentForm = document.getElementById('addStudentForm');
        const addSuperadminForm = document.getElementById('addSuperadminForm');
    
        [addStudentForm, addSuperadminForm].forEach(form => {
            form.addEventListener('submit', function(e) {
                const input = this.querySelector('.pincode-input');
                if (input.value.length !== 5) {
                    e.preventDefault();
                    alert('Please enter a 5-digit pincode.');
                }
            });
        });
    
        // Animate the approved students count
const approvedStudentsCountElement = document.getElementById('approvedStudentsCount');
const approvedStudentsCount = parseInt(approvedStudentsCountElement.textContent, 10);

// Start the animation
animateValue("approvedStudentsCount", 0, approvedStudentsCount, 2000);

// Animation function
function animateValue(id, start, end, duration) {
    const obj = document.getElementById(id);
    const range = end - start;
    const minTimer = 50;
    let stepTime = Math.abs(Math.floor(duration / range));
    stepTime = Math.max(stepTime, minTimer);
    let startTime = new Date().getTime();
    let endTime = startTime + duration;
    let timer;

    function run() {
        let now = new Date().getTime();
        let remaining = Math.max((endTime - now) / duration, 0);
        let value = Math.round(end - (remaining * range));
        obj.innerHTML = value;
        if (value == end) {
            clearInterval(timer);
        }
    }

    timer = setInterval(run, stepTime);
    run();
}

// Function to fetch approved students count from Firebase
async function fetchApprovedStudents() {
    try { 
        // Replace 'url' with your actual Firebase endpoint
        const response = await fetch(url);
        const data = await response.json();

        // If data is found, count the number of approved students
        if (data) {
            const approvedStudentsCount = Object.keys(data).length;
            animateValue("approvedStudentsCount", 0, approvedStudentsCount, 2000);
        } else {
            approvedStudentsCountElement.innerText = "0"; // Update count if no data
        }
    } catch (error) {
        console.error("Error fetching approved students:", error);
    }
}

// Call the function on page load
window.onload = function() {
    fetchApprovedStudents();
};

// Set up to refresh the stats every 5 minutes (300000 milliseconds)
setInterval(fetchApprovedStudents, 300000);

    }); 


    const messages = document.querySelectorAll('.successAnderrorMessagesPoppedup');
    
    messages.forEach(message => {
        // Set timeout to remove message after 3 seconds
        setTimeout(() => {
            message.classList.add('slideOut');
            
            // Remove element after animation completes
            message.addEventListener('animationend', function(e) {
                if (e.animationName === 'successAnderrorMessagesPoppedup-slideOut') {
                    message.remove();
                }
            });
        }, 3000);
    });

    </script>
    
{% endblock %}